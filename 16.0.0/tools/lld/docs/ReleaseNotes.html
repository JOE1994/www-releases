

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>lld 16.0.0 Release Notes &#8212; lld 16.0.0 documentation</title>
    <link rel="stylesheet" href="_static/llvm.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Linker Script implementation notes and policy" href="ELF/linker_script.html" />
    <link rel="prev" title="Partitions" href="Partitions.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
<a href="index.html"><img src="_static/logo.png" alt="LLVM Documentation"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ELF/linker_script.html" title="Linker Script implementation notes and policy"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">lld 16.0.0 Release Notes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release">Non-comprehensive list of changes in this release</a><ul>
<li><a class="reference internal" href="#elf-improvements">ELF Improvements</a></li>
<li><a class="reference internal" href="#breaking-changes">Breaking changes</a></li>
<li><a class="reference internal" href="#coff-improvements">COFF Improvements</a></li>
<li><a class="reference internal" href="#mingw-improvements">MinGW Improvements</a></li>
<li><a class="reference internal" href="#macho-improvements">MachO Improvements</a></li>
<li><a class="reference internal" href="#webassembly-improvements">WebAssembly Improvements</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Partitions.html"
                        title="previous chapter">Partitions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ELF/linker_script.html"
                        title="next chapter">Linker Script implementation notes and policy</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lld-release-release-notes">
<h1>lld 16.0.0 Release Notes<a class="headerlink" href="#lld-release-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id2">Non-comprehensive list of changes in this release</a></p>
<ul>
<li><p><a class="reference internal" href="#elf-improvements" id="id3">ELF Improvements</a></p></li>
<li><p><a class="reference internal" href="#breaking-changes" id="id4">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#coff-improvements" id="id5">COFF Improvements</a></p></li>
<li><p><a class="reference internal" href="#mingw-improvements" id="id6">MinGW Improvements</a></p></li>
<li><p><a class="reference internal" href="#macho-improvements" id="id7">MachO Improvements</a></p></li>
<li><p><a class="reference internal" href="#webassembly-improvements" id="id8">WebAssembly Improvements</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the lld linker, release 16.0.0.
Here we describe the status of lld, including major improvements
from the previous release. All lld releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
</div>
<div class="section" id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id2">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Permalink to this headline">¶</a></h2>
<div class="section" id="elf-improvements">
<h3><a class="toc-backref" href="#id3">ELF Improvements</a><a class="headerlink" href="#elf-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Link speed improved greatly compared with lld 15.0. Notably input section
initialization and relocation scanning are now parallel.
(<a class="reference external" href="https://reviews.llvm.org/D130810">D130810</a>)
(<a class="reference external" href="https://reviews.llvm.org/D133003">D133003</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ELFCOMPRESS_ZSTD</span></code> compressed input sections are now supported.
(<a class="reference external" href="https://reviews.llvm.org/D129406">D129406</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--compress-debug-sections=zstd</span></code> is now available to compress debug
sections with zstd (<code class="docutils literal notranslate"><span class="pre">ELFCOMPRESS_ZSTD</span></code>).
(<a class="reference external" href="https://reviews.llvm.org/D133548">D133548</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-warnings</span></code>/<code class="docutils literal notranslate"><span class="pre">-w</span></code> is now available to suppress warnings.
(<a class="reference external" href="https://reviews.llvm.org/D136569">D136569</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DT_RISCV_VARIANT_CC</span></code> is now produced if at least one <code class="docutils literal notranslate"><span class="pre">R_RISCV_JUMP_SLOT</span></code>
relocation references a symbol with the <code class="docutils literal notranslate"><span class="pre">STO_RISCV_VARIANT_CC</span></code> bit.
(<a class="reference external" href="https://reviews.llvm.org/D107951">D107951</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DT_STATIC_TLS</span></code> is now set for AArch64/PPC32/PPC64 initial-exec TLS models
when producing a shared object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-undefined-version</span></code> is now the default; symbols named in version
scripts that have no matching symbol in the output will be reported. Use
<code class="docutils literal notranslate"><span class="pre">--undefined-version</span></code> to revert to the old behavior.
(<a class="reference external" href="https://reviews.llvm.org/D135402">D135402</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-V</span></code> is now an alias for <code class="docutils literal notranslate"><span class="pre">-v</span></code> to support <code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">-fuse-ld=lld</span> <span class="pre">-v</span></code> on many targets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span></code> no longer defines <code class="docutils literal notranslate"><span class="pre">__global_pointer$</span></code> or <code class="docutils literal notranslate"><span class="pre">_TLS_MODULE_BASE_</span></code>.</p></li>
<li><p>A corner case of mixed GCC and Clang object files (<code class="docutils literal notranslate"><span class="pre">STB_WEAK</span></code> and
<code class="docutils literal notranslate"><span class="pre">STB_GNU_UNIQUE</span></code> in different COMDATs) is now supported.
(<a class="reference external" href="https://reviews.llvm.org/D136381">D136381</a>)</p></li>
<li><p>The output <code class="docutils literal notranslate"><span class="pre">SHT_RISCV_ATTRIBUTES</span></code> section now merges all input components
instead of picking the first input component.
(<a class="reference external" href="https://reviews.llvm.org/D138550">D138550</a>)</p></li>
<li><p>For x86-32, <code class="docutils literal notranslate"><span class="pre">-fno-plt</span></code> GD/LD TLS models <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">*___tls_get_addr&#64;GOT(%reg)</span></code>
are now supported. Previous output might have runtime crash.</p></li>
<li><p>Armv4(T) thunks are now supported.
(<a class="reference external" href="https://reviews.llvm.org/D139888">D139888</a>)
(<a class="reference external" href="https://reviews.llvm.org/D141272">D141272</a>)</p></li>
</ul>
</div>
<div class="section" id="breaking-changes">
<h3><a class="toc-backref" href="#id4">Breaking changes</a><a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="coff-improvements">
<h3><a class="toc-backref" href="#id5">COFF Improvements</a><a class="headerlink" href="#coff-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The linker command line entry in <code class="docutils literal notranslate"><span class="pre">S_ENVBLOCK</span></code> of the PDB is now stripped
from input files, to align with MSVC behavior.
(<a class="reference external" href="https://reviews.llvm.org/D137723">D137723</a>)</p></li>
<li><p>Switched from SHA1 to BLAKE3 for PDB type hashing / <code class="docutils literal notranslate"><span class="pre">-gcodeview-ghash</span></code>
(<a class="reference external" href="https://reviews.llvm.org/D137101">D137101</a>)</p></li>
<li><p>Improvements to the PCH.OBJ files handling. Now LLD behaves the same as MSVC
link.exe when merging PCH.OBJ files that don’t have the same signature.
(<a class="reference external" href="https://reviews.llvm.org/D136762">D136762</a>)</p></li>
<li><p>Changed the OrdinalBase for DLLs from 0 to 1, matching the output from
both MS link.exe and GNU ld. (<a class="reference external" href="https://reviews.llvm.org/D134140">D134140</a>)</p></li>
</ul>
</div>
<div class="section" id="mingw-improvements">
<h3><a class="toc-backref" href="#id6">MinGW Improvements</a><a class="headerlink" href="#mingw-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The lld-specific options <code class="docutils literal notranslate"><span class="pre">--guard-cf</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-guard-cf</span></code>,
<code class="docutils literal notranslate"><span class="pre">--guard-longjmp</span></code> and <code class="docutils literal notranslate"><span class="pre">--no-guard-longjmp</span></code> has been added to allow
enabling Control Flow Guard and long jump hardening. These options are
disabled by default, but enabling <code class="docutils literal notranslate"><span class="pre">--guard-cf</span></code> will also enable
<code class="docutils literal notranslate"><span class="pre">--guard-longjmp</span></code> unless <code class="docutils literal notranslate"><span class="pre">--no-guard-longjmp</span></code> is also specified.
<code class="docutils literal notranslate"><span class="pre">--guard-longjmp</span></code> depends on <code class="docutils literal notranslate"><span class="pre">--guard-cf</span></code> and cannot be used by itself.
Note that these features require the <code class="docutils literal notranslate"><span class="pre">_load_config_used</span></code> symbol to contain
the load config directory and be filled with the required symbols.
(<a class="reference external" href="https://reviews.llvm.org/D132808">D132808</a>)</p></li>
<li><p>Pick up libraries named <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;.lib</span></code> when linked with <code class="docutils literal notranslate"><span class="pre">-l&lt;name&gt;</span></code>, even
if <code class="docutils literal notranslate"><span class="pre">-static</span></code> has been specified. This fixes conformance to what
GNU ld does. (<a class="reference external" href="https://reviews.llvm.org/D135651">D135651</a>)</p></li>
<li><p>Unwinding in Rust code on i386 in MinGW builds has been fixed, by avoiding
to leave out the <code class="docutils literal notranslate"><span class="pre">rust_eh_personality</span></code> symbol.
(<a class="reference external" href="https://reviews.llvm.org/D136879">D136879</a>)</p></li>
</ul>
</div>
<div class="section" id="macho-improvements">
<h3><a class="toc-backref" href="#id7">MachO Improvements</a><a class="headerlink" href="#macho-improvements" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="webassembly-improvements">
<h3><a class="toc-backref" href="#id8">WebAssembly Improvements</a><a class="headerlink" href="#webassembly-improvements" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ELF/linker_script.html" title="Linker Script implementation notes and policy"
             >next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             >previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2023, LLVM Project.
      Last updated on 2023-03-18.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>